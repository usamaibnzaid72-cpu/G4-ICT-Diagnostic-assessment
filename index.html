<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 4 ICT Diagnostic Assessment</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom right, #008080, #004d4d);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            width: 80%;
            max-width: 800px;
            margin: 20px;
        }

        .logo {
            display: block;
            margin: 0 auto 20px auto;
            max-width: 150px;
        }

        .title-page, .quiz-page, .result-page {
            display: none;
            text-align: center;
        }

        .title-page {
            display: block;
        }

        h1, h2, h3 {
            color: #ccff90;
        }

        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .input-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #008080;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #004d4d;
        }

        .question {
            margin-bottom: 20px;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            text-align: left;
        }

        .options label {
            display: block;
            margin: 10px 0;
            cursor: pointer;
        }

        .matching-pair {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .matching-pair select {
            width: 45%;
            padding: 5px;
            border-radius: 5px;
        }

        .report-section {
            text-align: left;
            margin-top: 20px;
        }

        .report-section .feedback-section {
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .report-section .strength {
            background-color: #006400; /* Darker green */
        }
        
        .report-section .weakness {
            background-color: #8B0000; /* Darker red */
        }
        
        .report-section .feedback-box {
            background-color: rgba(255, 255, 255, 0.1);
        }

    </style>
</head>
<body>

    <div class="container">
        <div class="title-page" id="title-page">
            <img src="https://storage.googleapis.com/yaschools/schools-logo/148544809806-19-2025-10-34-06.jpg" alt="School Logo" class="logo">
            <h1>Grade 4 â€“ ICT<br>Diagnostic Assessment</h1>
            <p>Teacher Name: Mr. Usama Ibnzaid</p>
            <div class="input-group">
                <label for="studentName">Student Full Name:</label>
                <input type="text" id="studentName" required>
            </div>
            <button onclick="startAssessment()">Start Assessment</button>
        </div>

        <div class="quiz-page" id="quiz-page">
            <h2 id="question-counter">Question 1 of 100</h2>
            <div id="question-container"></div>
            <button onclick="previousQuestion()" id="previous-button" style="display: none;">Previous</button>
            <button onclick="nextQuestion()" id="next-button">Next</button>
            <button onclick="submitAssessment()" style="display: none;" id="submit-button">Submit Assessment</button>
        </div>

        <div class="result-page" id="result-page">
            <h2>Assessment Report</h2>
            <p>Student: <span id="student-name-result"></span></p>
            <p>Your Score: <span id="score"></span> / 100</p>
            <div class="report-section">
                <h3>Strengths & Weaknesses</h3>
                <div id="strengths-weaknesses"></div>
                <h3>Constructive Feedback & Recommendations</h3>
                <p id="feedback"></p>
                <h3>Formal Written Report to Parent/Guardian</h3>
                <p id="parent-report"></p>
            </div>
            <button onclick="downloadReport()">Download the Report</button>
        </div>
    </div>

    <script>
        const quizData = [
            { type: "multiple-choice", question: "1. Which of these is a computer part you can touch?", options: ["Software", "Hardware", "Data", "Virus"], answer: "Hardware", topic: "Hardware" },
            { type: "true-false", question: "2. The monitor is used for typing letters.", answer: "False", topic: "Hardware" },
            { type: "fill-in-the-blank", question: "3. The main screen you see when you turn on a computer is called the _________.", answer: "desktop", topic: "Software" },
            { type: "matching", question: "4. Match the device to its type.", pairs: [{ left: "Keyboard", right: ["Input Device", "Output Device"] }, { left: "Printer", right: ["Output Device", "Input Device"] }], answers: { "Keyboard": "Input Device", "Printer": "Output Device" }, topic: "Hardware" },
            { type: "short-answer", question: "5. What is an 'app' short for?", answer: "Application", topic: "Software" },
            { type: "case-study", question: "6. **Case Study:** A student wants to draw a picture on the computer. What type of program would they use?", answer: "A drawing or painting program.", topic: "Software" },
            { type: "multiple-choice", question: "7. Which of these is a safe password?", options: ["123456", "password", "MyDogSparky", "f0rty$even#"], answer: "f0rty$even#", topic: "Digital Citizenship" },
            { type: "true-false", question: "8. A tablet is a type of computer.", answer: "True", topic: "Hardware" },
            { type: "fill-in-the-blank", question: "9. To find a website, you type its _________ into the address bar.", answer: "URL", topic: "Internet" },
            { type: "matching", question: "10. Match the action to the program.", pairs: [{ left: "Typing a story", right: ["Word Processor", "Web Browser"] }, { left: "Finding a website", right: ["Web Browser", "Word Processor"] }], answers: { "Typing a story": "Word Processor", "Finding a website": "Web Browser" }, topic: "Software" },
            { type: "short-answer", question: "11. What is the main purpose of a 'search engine'?", answer: "To help you find information on the internet.", topic: "Internet" },
            { type: "case-study", question: "12. **Case Study:** A student finds a funny picture online and wants to share it with a friend. What is the safest way to do this?", answer: "By asking an adult for help.", topic: "Digital Citizenship" },
            { type: "multiple-choice", question: "13. What is a 'digital footprint'?", options: ["A mark left by a computer mouse", "The trail of data we leave online", "A type of keyboard", "A computer game"], answer: "The trail of data we leave online", topic: "Digital Citizenship" },
            { type: "true-false", question: "14. A computer mouse is an input device.", answer: "True", topic: "Hardware" },
            { type: "fill-in-the-blank", question: "15. The 'brain' of the computer is the _________.", answer: "CPU", topic: "Hardware" },
            { type: "matching", question: "16. Match the term to its definition.", pairs: [{ left: "Monitor", right: ["An output device that shows images", "An input device for typing"] }, { left: "Keyboard", right: ["An input device for typing", "An output device that shows images"] }], answers: { "Monitor": "An output device that shows images", "Keyboard": "An input device for typing" }, topic: "Hardware" },
            { type: "short-answer", question: "17. What does 'copy and paste' do?", answer: "It duplicates text or a picture from one place to another.", topic: "Software" },
            { type: "case-study", question: "18. **Case Study:** A student is working on a school project and needs to save their work. What button or command should they use?", answer: "The 'Save' or 'Save As' command.", topic: "File Management" },
            { type: "multiple-choice", question: "19. Which of these is a way to stay safe online?", options: ["Giving out personal information", "Talking to strangers online", "Using a strong password", "Clicking on every link"], answer: "Using a strong password", topic: "Digital Citizenship" },
            { type: "true-false", question: "20. A file is a collection of data stored on a computer.", answer: "True", topic: "File Management" },
            { type: "fill-in-the-blank", question: "21. A _________ is a program that lets you surf the internet.", answer: "web browser", topic: "Internet" },
            { type: "matching", question: "22. Match the device to what it is used for.", pairs: [{ left: "Speaker", right: ["Listening to sound", "Drawing on a screen"] }, { left: "Webcam", right: ["Taking pictures or video", "Listening to sound"] }], answers: { "Speaker": "Listening to sound", "Webcam": "Taking pictures or video" }, topic: "Hardware" },
            { type: "short-answer", question: "23. What is an 'operating system'?", answer: "The main program that controls the computer's hardware and software.", topic: "Software" },
            { type: "case-study", question: "24. **Case Study:** A student wants to send a letter to their grandmother using a computer. What program would they most likely use?", answer: "A word processor like Microsoft Word or Google Docs.", topic: "Software" },
            { type: "multiple-choice", question: "25. Which of these is an example of a social media site?", options: ["Google", "Facebook", "Amazon", "Netflix"], answer: "Facebook", topic: "Internet" },
            { type: "true-false", question: "26. You should always open an email attachment from a sender you don't know.", answer: "False", topic: "Digital Citizenship" },
            { type: "fill-in-the-blank", question: "27. To make a document private, you can add a _________ to it.", answer: "password", topic: "Digital Citizenship" },
            { type: "matching", question: "28. Match the device to its category.", pairs: [{ left: "Microphone", right: ["Input Device", "Output Device"] }, { left: "Headphones", right: ["Output Device", "Input Device"] }], answers: { "Microphone": "Input Device", "Headphones": "Output Device" }, topic: "Hardware" },
            { type: "short-answer", question: "29. What is 'cyberbullying'?", answer: "Using technology to hurt or scare someone.", topic: "Digital Citizenship" },
            { type: "case-study", question: "30. **Case Study:** A student wants to make a video of their school trip. What device would they use to film it?", answer: "A digital camera, webcam, or a smartphone.", topic: "Hardware" },
            { type: "multiple-choice", question: "31. Which of these is a type of computer?", options: ["Refrigerator", "Desktop computer", "Lamp", "Chair"], answer: "Desktop computer", topic: "Hardware" },
            { type: "true-false", question: "32. The internet is the same thing as the World Wide Web.", answer: "False", topic: "Internet" },
            { type: "fill-in-the-blank", question: "33. A _________ is a folder that holds other files and folders.", answer: "folder", topic: "File Management" },
            { type: "matching", question: "34. Match the file type to its content.", pairs: [{ left: ".jpg", right: ["Picture file", "Text file"] }, { left: ".txt", right: ["Text file", "Picture file"] }], answers: { ".jpg": "Picture file", ".txt": "Text file" }, topic: "File Management" },
            { type: "short-answer", question: "35. What is the purpose of a 'backup'?", answer: "To make a copy of a file in case the original is lost or damaged.", topic: "File Management" },
            { type: "case-study", question: "36. **Case Study:** A student is working on a school project and needs to save their work. What button or command should they use?", answer: "The 'Save' or 'Save As' command.", topic: "File Management" },
            { type: "multiple-choice", question: "37. What is 'computer programming'?", options: ["Playing a game on the computer", "Giving instructions to a computer to solve a problem", "Typing a document", "Sending a message"], answer: "Giving instructions to a computer to solve a problem", topic: "Programming" },
            { type: "true-false", question: "38. All computers are connected to the internet.", answer: "False", topic: "Internet" },
            { type: "fill-in-the-blank", question: "39. The process of turning off your computer is called _________.", answer: "shutting down", topic: "Hardware" },
            { type: "matching", question: "40. Match the term to its meaning.", pairs: [{ left: "Download", right: ["To copy a file from the internet to your computer", "To send a file from your computer to the internet"] }, { left: "Upload", right: ["To send a file from your computer to the internet", "To copy a file from the internet to your computer"] }], answers: { "Download": "To copy a file from the internet to your computer", "Upload": "To send a file from your computer to the internet" }, topic: "Internet" },
            { type: "short-answer", question: "41. What is a 'virus' in a computer?", answer: "A harmful program that can damage your computer or steal your information.", topic: "Digital Citizenship" },
            { type: "case-study", question: "42. **Case Study:** A student wants to make a family tree. They need to put a picture and a name for each person. What kind of program would be best?", answer: "A presentation or diagram program.", topic: "Software" },
            { type: "multiple-choice", question: "43. What does 'Wi-Fi' stand for?", options: ["Wired Fidelity", "Wireless Fidelity", "Web Fire", "Web Filter"], answer: "Wireless Fidelity", topic: "Internet" },
            { type: "true-false", question: "44. You should share your personal information like your address or phone number online.", answer: "False", topic: "Digital Citizenship" },
            { type: "fill-in-the-blank", question: "45. The physical parts of a computer are called _________.", answer: "hardware", topic: "Hardware" },
            { type: "matching", question: "46. Match the device to its category.", pairs: [{ left: "Scanner", right: ["Input device", "Output device"] }, { left: "Monitor", right: ["Output device", "Input device"] }], answers: { "Scanner": "Input device", "Monitor": "Output device" }, topic: "Hardware" },
            { type: "short-answer", question: "47. What is 'netiquette'?", answer: "The set of rules for good behavior online.", topic: "Digital Citizenship" },
            { type: "case-study", question: "48. **Case Study:** A student needs to email a picture to their teacher. What command would they use in the email program?", answer: "The 'attach' or 'insert' command.", topic: "Internet" },
            { type: "multiple-choice", question: "49. Which of these is a way to protect your computer?", options: ["Installing antivirus software", "Clicking on pop-up ads", "Sharing your password", "Downloading files from unknown sources"], answer: "Installing antivirus software", topic: "Digital Citizenship" },
            { type: "true-false", question: "50. A program is a set of instructions that a computer can follow.", answer: "True", topic: "Programming" },
            { type: "fill-in-the-blank", question: "51. A _________ is a type of storage that holds data even when the computer is turned off.", answer: "hard drive", topic: "Hardware" },
            { type: "matching", question: "52. Match the action to the program.", pairs: [{ left: "Sending an email", right: ["Email Program", "Spreadsheet Program"] }, { left: "Making a chart with numbers", right: ["Spreadsheet Program", "Email Program"] }], answers: { "Sending an email": "Email Program", "Making a chart with numbers": "Spreadsheet Program" }, topic: "Software" },
            { type: "short-answer", question: "53. What is a 'folder' used for?", answer: "To organize and store files.", topic: "File Management" },
            { type: "case-study", question: "54. **Case Study:** A student's computer is running very slowly. What might be a simple thing to do to help?", answer: "Restart the computer or close unnecessary programs.", topic: "Troubleshooting" },
            { type: "multiple-choice", question: "55. Which of these is a safe way to communicate online?", options: ["Talking to friends on a secure chat app", "Sharing secrets with a new online friend", "Agreeing to meet an online stranger", "Using your real name in a public game"], answer: "Talking to friends on a secure chat app", topic: "Digital Citizenship" },
            { type: "true-false", question: "56. A URL is a website's address.", answer: "True", topic: "Internet" },
            { type: "fill-in-the-blank", question: "57. When you visit a website, your computer is the _________ and the website is on a server.", answer: "client", topic: "Internet" },
            { type: "matching", question: "58. Match the term to its meaning.", pairs: [{ left: "Username", right: ["A name you use to log in", "A secret word to log in"] }, { left: "Password", right: ["A secret word to log in", "A name you use to log in"] }], answers: { "Username": "A name you use to log in", "Password": "A secret word to log in" }, topic: "Digital Citizenship" },
            { type: "short-answer", question: "59. What does 'download' mean?", answer: "To copy a file from the internet to your computer.", topic: "Internet" },
            { type: "case-study", question: "60. **Case Study:** A student wants to print a picture they found online. What device is needed?", answer: "A printer.", topic: "Hardware" },
            { type: "multiple-choice", question: "61. Which of these is a type of software?", options: ["Hard drive", "Mouse", "Game", "Monitor"], answer: "Game", topic: "Software" },
            { type: "true-false", question: "62. You should only use a strong password for your email, not for games.", answer: "False", topic: "Digital Citizenship" },
            { type: "fill-in-the-blank", question: "63. The part of a computer that displays images and text is the _________.", answer: "monitor", topic: "Hardware" },
            { type: "matching", question: "64. Match the program to its use.", pairs: [{ left: "Spreadsheet", right: ["Organizing data in rows and columns", "Typing a letter"] }, { left: "Word Processor", right: ["Typing a letter", "Organizing data in rows and columns"] }], answers: { "Spreadsheet": "Organizing data in rows and columns", "Word Processor": "Typing a letter" }, topic: "Software" },
            { type: "short-answer", question: "65. What is a 'browser'?", answer: "A program used to view web pages on the internet.", topic: "Internet" },
            { type: "case-study", question: "66. **Case Study:** A student sees a pop-up ad that says they won a prize. What should they do?", answer: "Close the pop-up immediately and ask an adult for help.", topic: "Digital Citizenship" },
            { type: "multiple-choice", question: "67. Which of these is a safe way to share a picture with a friend?", options: ["Email it to them", "Post it on a public website", "Send it to a stranger", "Tell them your password"], answer: "Email it to them", topic: "Digital Citizenship" },
            { type: "true-false", question: "68. A computer program is a set of instructions.", answer: "True", topic: "Programming" },
            { type: "fill-in-the-blank", question: "69. To move a file to a new location, you can use the 'cut' and '_________ ' commands.", answer: "paste", topic: "File Management" },
            { type: "matching", question: "70. Match the term to its meaning.", pairs: [{ left: "Input", right: ["Giving a computer information", "Getting information from a computer"] }, { left: "Output", right: ["Getting information from a computer", "Giving a computer information"] }], answers: { "Input": "Giving a computer information", "Output": "Getting information from a computer" }, topic: "Hardware" },
            { type: "short-answer", question: "71. What does 'phishing' mean?", answer: "Tricking someone into giving away personal information online.", topic: "Digital Citizenship" },
            { type: "case-study", question: "72. **Case Study:** A student wants to listen to a song on their computer. What device would play the sound?", answer: "Speakers or headphones.", topic: "Hardware" },
            { type: "multiple-choice", question: "73. Which of these is a type of computer?", options: ["Smartphone", "TV", "Microwave", "Lamp"], answer: "Smartphone", topic: "Hardware" },
            { type: "true-false", question: "74. It is okay to use someone else's computer account without their permission.", answer: "False", topic: "Digital Citizenship" },
            { type: "fill-in-the-blank", question: "75. A _________ is a program that finds and removes computer viruses.", answer: "antivirus", topic: "Digital Citizenship" },
            { type: "matching", question: "76. Match the term to its meaning.", pairs: [{ left: "URL", right: ["Website address", "Computer program"] }, { left: "Email", right: ["Electronic mail", "Electronic money"] }], answers: { "URL": "Website address", "Email": "Electronic mail" }, topic: "Internet" },
            { type: "short-answer", question: "77. What is 'computer memory'?", answer: "The part of the computer that stores information for a short time.", topic: "Hardware" },
            { type: "case-study", question: "78. **Case Study:** A student wants to make a chart to show how many students in the class like pizza or burgers. What kind of program would be best?", answer: "A spreadsheet program.", topic: "Software" },
            { type: "multiple-choice", question: "79. Which of these is an example of an input device?", options: ["Printer", "Monitor", "Webcam", "Speaker"], answer: "Webcam", topic: "Hardware" },
            { type: "true-false", question: "80. A 'folder' is a physical object you can hold.", answer: "False", topic: "File Management" },
            { type: "fill-in-the-blank", question: "81. A _________ is a special name that identifies you on a website or app.", answer: "username", topic: "Digital Citizenship" },
            { type: "matching", question: "82. Match the device to its category.", pairs: [{ left: "Mouse", right: ["Input device", "Output device"] }, { left: "Headphones", right: ["Output device", "Input device"] }], answers: { "Mouse": "Input device", "Headphones": "Output device" }, topic: "Hardware" },
            { type: "short-answer", question: "83. What is the 'cloud' in computing?", answer: "A network of servers that store, manage, and process data over the internet.", topic: "Internet" },
            { type: "case-study", question: "84. **Case Study:** A student is using a program that shows them how to build a robot step by step. What kind of instructions are they following?", answer: "An algorithm.", topic: "Programming" },
            { type: "multiple-choice", question: "85. What is the term for a program designed to harm your computer?", options: ["Antivirus", "Malware", "Web browser", "Desktop"], answer: "Malware", topic: "Digital Citizenship" },
            { type: "true-false", question: "86. An algorithm is a set of instructions.", answer: "True", topic: "Programming" },
            { type: "fill-in-the-blank", question: "87. The process of finding and fixing mistakes in a program is called _________.", answer: "debugging", topic: "Programming" },
            { type: "matching", question: "88. Match the device to its purpose.", pairs: [{ left: "Webcam", right: ["Taking video and pictures", "Typing words"] }, { left: "Keyboard", right: ["Typing words", "Taking video and pictures"] }], answers: { "Webcam": "Taking video and pictures", "Keyboard": "Typing words" }, topic: "Hardware" },
            { type: "short-answer", question: "89. What is 'privacy' online?", answer: "Protecting your personal information and keeping it safe from others.", topic: "Digital Citizenship" },
            { type: "case-study", question: "90. **Case Study:** A student wants to make a story with pictures and sounds. What kind of program would be best?", answer: "A presentation or multimedia program.", topic: "Software" },
            { type: "multiple-choice", question: "91. What is the process of getting information from a computer?", options: ["Input", "Processing", "Output", "Storage"], answer: "Output", topic: "Hardware" },
            { type: "true-false", question: "92. A 'save' command permanently deletes a file.", answer: "False", topic: "File Management" },
            { type: "fill-in-the-blank", question: "93. A _________ is a computer that provides services to other computers on a network.", answer: "server", topic: "Internet" },
            { type: "matching", question: "94. Match the term to its meaning.", pairs: [{ left: "Hardware", right: ["Physical parts of a computer", "Programs on a computer"] }, { left: "Software", right: ["Programs on a computer", "Physical parts of a computer"] }], answers: { "Hardware": "Physical parts of a computer", "Software": "Programs on a computer" }, topic: "ICT Fundamentals" },
            { type: "short-answer", question: "95. What is the purpose of a 'search bar' in a web browser?", answer: "To type keywords to find information on the internet.", topic: "Internet" },
            { type: "case-study", question: "96. **Case Study:** A student is working on a story and wants to change the font and color of the text. What program feature allows this?", answer: "The formatting or text styling options.", topic: "Software" },
            { type: "multiple-choice", question: "97. What is a computer 'network'?", options: ["A group of computers connected to share resources", "A type of game", "A program for typing", "A type of mouse"], answer: "A group of computers connected to share resources", topic: "Internet" },
            { type: "true-false", question: "98. All information on the internet is true.", answer: "False", topic: "Digital Citizenship" },
            { type: "fill-in-the-blank", question: "99. A _________ is a type of storage that holds data for a short time and is erased when the computer is turned off.", answer: "RAM", topic: "Hardware" },
            { type: "short-answer", question: "100. What is 'coding'?", answer: "The process of writing instructions for a computer in a programming language.", topic: "Programming" }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        const userAnswers = {};
        let studentName = "";

        const titlePage = document.getElementById('title-page');
        const quizPage = document.getElementById('quiz-page');
        const resultPage = document.getElementById('result-page');
        const questionContainer = document.getElementById('question-container');
        const questionCounter = document.getElementById('question-counter');
        const submitButton = document.getElementById('submit-button');
        const nextButton = document.getElementById('next-button');
        const previousButton = document.getElementById('previous-button');

        function startAssessment() {
            studentName = document.getElementById('studentName').value.trim();
            if (!studentName) {
                alert("Please enter your full name to start the assessment.");
                return;
            }
            document.getElementById('student-name-result').textContent = studentName;
            titlePage.style.display = 'none';
            quizPage.style.display = 'block';
            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestionIndex < 0) currentQuestionIndex = 0;
            if (currentQuestionIndex >= quizData.length) currentQuestionIndex = quizData.length - 1;

            const q = quizData[currentQuestionIndex];
            questionCounter.textContent = `Question ${currentQuestionIndex + 1} of ${quizData.length}`;
            questionContainer.innerHTML = '';
            
            const questionDiv = document.createElement('div');
            questionDiv.classList.add('question');
            
            let questionHTML = `<h4>${q.question}</h4>`;
            questionDiv.innerHTML = questionHTML;

            if (q.type === 'multiple-choice' || q.type === 'true-false') {
                const optionsDiv = document.createElement('div');
                optionsDiv.classList.add('options');
                (q.options || ["True", "False"]).forEach(option => {
                    const inputId = `q${currentQuestionIndex}-opt-${option.replace(/\s+/g, '-')}`;
                    optionsDiv.innerHTML += `
                        <label for="${inputId}">
                            <input type="radio" name="answer" id="${inputId}" value="${option}"> ${option}
                        </label>
                    `;
                });
                questionDiv.appendChild(optionsDiv);
                if (userAnswers[currentQuestionIndex]) {
                    const savedAnswer = userAnswers[currentQuestionIndex];
                    const selectedInput = document.querySelector(`input[name="answer"][value="${savedAnswer}"]`);
                    if (selectedInput) {
                        selectedInput.checked = true;
                    }
                }
            } else if (q.type === 'fill-in-the-blank' || q.type === 'short-answer' || q.type === 'case-study') {
                const input = document.createElement('input');
                input.type = 'text';
                input.placeholder = 'Type your answer here...';
                input.id = 'text-answer';
                input.style.width = 'calc(100% - 22px)';
                if (userAnswers[currentQuestionIndex]) {
                    input.value = userAnswers[currentQuestionIndex];
                }
                questionDiv.appendChild(input);
            } else if (q.type === 'matching') {
                const matchingDiv = document.createElement('div');
                q.pairs.forEach((pair, index) => {
                    const pairDiv = document.createElement('div');
                    pairDiv.classList.add('matching-pair');
                    const selectId = `matching-${currentQuestionIndex}-${index}`;
                    pairDiv.innerHTML = `
                        <span>${pair.left}</span>
                        <select id="${selectId}">
                            <option value="">-- Select --</option>
                            ${pair.right.map(r => `<option value="${r}">${r}</option>`).join('')}
                        </select>
                    `;
                    matchingDiv.appendChild(pairDiv);
                    setTimeout(() => {
                        if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex][pair.left]) {
                            document.getElementById(selectId).value = userAnswers[currentQuestionIndex][pair.left];
                        }
                    }, 0);
                });
                questionDiv.appendChild(matchingDiv);
            }

            questionContainer.appendChild(questionDiv);

            previousButton.style.display = currentQuestionIndex > 0 ? 'inline-block' : 'none';
            if (currentQuestionIndex === quizData.length - 1) {
                nextButton.style.display = 'none';
                submitButton.style.display = 'inline-block';
            } else {
                nextButton.style.display = 'inline-block';
                submitButton.style.display = 'none';
            }
        }

        function saveAnswer() {
            const q = quizData[currentQuestionIndex];
            if (q.type === 'multiple-choice' || q.type === 'true-false') {
                const selected = document.querySelector('input[name="answer"]:checked');
                userAnswers[currentQuestionIndex] = selected ? selected.value : null;
            } else if (q.type === 'fill-in-the-blank' || q.type === 'short-answer' || q.type === 'case-study') {
                const textAnswer = document.getElementById('text-answer');
                userAnswers[currentQuestionIndex] = textAnswer ? textAnswer.value.trim() : null;
            } else if (q.type === 'matching') {
                const matchingAnswers = {};
                q.pairs.forEach((pair, index) => {
                    const select = document.getElementById(`matching-${currentQuestionIndex}-${index}`);
                    matchingAnswers[pair.left] = select.value;
                });
                userAnswers[currentQuestionIndex] = matchingAnswers;
            }
        }

        function validateAnswer() {
            const q = quizData[currentQuestionIndex];
            if (q.type === 'multiple-choice' || q.type === 'true-false') {
                return document.querySelector('input[name="answer"]:checked') !== null;
            } else if (q.type === 'fill-in-the-blank' || q.type === 'short-answer' || q.type === 'case-study') {
                const textAnswer = document.getElementById('text-answer');
                return textAnswer && textAnswer.value.trim() !== "";
            } else if (q.type === 'matching') {
                let allSelected = true;
                q.pairs.forEach((pair, index) => {
                    const select = document.getElementById(`matching-${currentQuestionIndex}-${index}`);
                    if (select.value === "") allSelected = false;
                });
                return allSelected;
            }
            return true;
        }

        function nextQuestion() {
            if (validateAnswer()) {
                saveAnswer();
                currentQuestionIndex++;
                loadQuestion();
            } else {
                alert("Please answer the current question before proceeding.");
            }
        }

        function previousQuestion() {
            saveAnswer();
            currentQuestionIndex--;
            loadQuestion();
        }

        function submitAssessment() {
            if (validateAnswer()) {
                saveAnswer();
                let correctCount = 0;
                const topicScores = {};
                const topicTotals = {};
                
                quizData.forEach((q, index) => {
                    let isCorrect = false;
                    const userAnswer = userAnswers[index];
                    const topic = q.topic || "General";

                    topicTotals[topic] = (topicTotals[topic] || 0) + 1;

                    if (q.type === 'multiple-choice' || q.type === 'true-false') {
                        if (userAnswer === q.answer) isCorrect = true;
                    } else if (q.type === 'fill-in-the-blank' || q.type === 'short-answer' || q.type === 'case-study') {
                        if (userAnswer && userAnswer.toLowerCase() === q.answer.toLowerCase()) isCorrect = true;
                    } else if (q.type === 'matching') {
                        let allMatchedCorrectly = true;
                        if (userAnswer) {
                            for (const term in q.answers) {
                                if (userAnswer[term] !== q.answers[term]) {
                                    allMatchedCorrectly = false;
                                    break;
                                }
                            }
                        } else {
                            allMatchedCorrectly = false;
                        }
                        isCorrect = allMatchedCorrectly;
                    }

                    if (isCorrect) {
                        correctCount++;
                        topicScores[topic] = (topicScores[topic] || 0) + 1;
                    }
                });

                score = correctCount;
                showResults(topicScores, topicTotals);
            } else {
                alert("Please answer the final question before submitting.");
            }
        }

        function showResults(topicScores, topicTotals) {
            quizPage.style.display = 'none';
            resultPage.style.display = 'block';

            document.getElementById('score').textContent = score;
            
            const strengths = [];
            const weaknesses = [];
            
            let strengthsWeaknessesHTML = "";
            for (const topic in topicTotals) {
                const correct = topicScores[topic] || 0;
                const total = topicTotals[topic];
                const percentage = (correct / total) * 100;
                
                let backgroundClass = 'feedback-box';
                if (percentage >= 80) {
                    strengths.push(topic);
                    backgroundClass = 'strength';
                }
                if (percentage < 50) {
                    weaknesses.push(topic);
                    backgroundClass = 'weakness';
                }

                strengthsWeaknessesHTML += `<div class="${backgroundClass}"><p><strong>${topic}</strong>: ${correct}/${total} (${percentage.toFixed(0)}%)</p></div>`;
            }
            document.getElementById('strengths-weaknesses').innerHTML = strengthsWeaknessesHTML;

            const feedback = `
                Based on your performance, here is a summary of your strengths and areas for development:
                <br><br><strong>Strengths:</strong> You demonstrated a strong understanding of the following topics: ${strengths.length > 0 ? strengths.join(', ') : 'All topics'}.
                <br><br><strong>Weaknesses:</strong> Areas that could use more focus include: ${weaknesses.length > 0 ? weaknesses.join(', ') : 'No specific weaknesses were identified'}.
                <br><br><strong>Recommendations:</strong>
                <br>- To build on your strong foundation, consider exploring more advanced concepts in your areas of strength.
                <br>- For areas of weakness, it is recommended that you review core concepts. Reviewing notes, online tutorials, or seeking clarification would be beneficial.
            `;
            document.getElementById('feedback').innerHTML = feedback;

            // Formal written report
            const today = new Date();
            const date = today.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            const parentReportText = `
[Your School Name]
[School Address]
[City, Postal Code]
[Phone Number]
[Email Address]

${date}

To the Parents/Guardians of ${studentName},

This letter is a formal report on the Grade 4 ICT Diagnostic Assessment administered on ${date}. The purpose of this assessment was to evaluate your child's foundational knowledge in key areas of Information and Communication Technology.

**Student Information:**
Student Name: ${studentName}
Total Score: ${score} out of 100

**Performance Overview:**
Your child demonstrated a commendable understanding of ICT principles, with particular strength in the following topics: ${strengths.length > 0 ? strengths.join(', ') : 'All topics assessed'}. This indicates a strong grasp of core concepts in these areas.

**Areas for Development:**
Based on the results, areas that may require additional attention include: ${weaknesses.length > 0 ? weaknesses.join(', ') : 'No specific weaknesses were identified, which is excellent'}. Focusing on these topics through targeted practice can help strengthen your childâ€™s overall comprehension.

**Recommendations:**
It is recommended that your child reviews the materials related to the identified areas for development. Continued engagement with these subjects will be crucial for their progress.

Please feel free to contact me at your convenience to discuss these results further.

Sincerely,

Mr. Usama Ibnzaid
ICT Teacher
[Your Teacher Email]
`;
            document.getElementById('parent-report').innerText = parentReportText.trim();
        }

        function downloadReport() {
            const reportContent = document.getElementById('parent-report').innerText;
            const blob = new Blob([reportContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${studentName.replace(/ /g, '_')}_ICT_Assessment_Report.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
